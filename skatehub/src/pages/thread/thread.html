<!--
  Generated template for the ThreadPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title *ngIf="recipients">{{recipients[0].username}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-list *ngIf="thread">
    <ion-row *ngFor="let msg of thread.thread.messages">
      <ion-item *ngIf= "msg.sender != id" class = "message-item" no-lines>
        <ion-avatar item-start>
          <img [src]="thread.recAvatar">
        </ion-avatar>
        <p class="msg other-user-msg" text-wrap>{{msg.message}}</p>
      </ion-item>
      <ion-item *ngIf= "msg.sender == id" class = "message-item"  no-lines>
       <!-- Need to fix this to make avatar of other person -->
        <!-- <ion-avatar item-start end right>
          <img [src]="thread.Avatar">
        </ion-avatar> -->
        <p class="msg user-msg" ion-text color="white" item-end text-wrap>{{msg.message}}</p>
      </ion-item>
    </ion-row>
  </ion-list>
</ion-content>
<ion-footer>
  <ion-toolbar color="white">
    <ion-buttons start left id="pl-img-btn">
      <button ion-button icon-only>
        <ion-icon color="primary" name="image"></ion-icon>
      </button>
    </ion-buttons>
    <form (ngSubmit) = "sendMessage()">
      <ion-textarea id="messageTextArea" elastic [(ngModel)]="message" name="message"
      class="message-input" placeholder="Start a message">
      </ion-textarea>
    </form>
    <ion-buttons *ngIf="message.length == 0" end id="pr-share-btn">
      <button ion-button icon-only>
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons *ngIf="message.length > 0" end id="pr-share-btn" (tap) = "sendMessage()">
      <button ion-button icon-only>
        <ion-icon color="primary" name="send"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
